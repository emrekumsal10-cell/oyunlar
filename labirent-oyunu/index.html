<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Blok Kırıcı</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #0d0221;
            --paddle-color: #f5f5f5;
            --ball-color: #fcf6b1;
            --brick-colors: ['#fa4659', '#2eb872', '#f9a828', '#3498db', '#9b59b6'];
            --text-color: #FFFFFF;
            --font-family: 'Press Start 2P', cursive;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: var(--bg-color);
            font-family: var(--font-family);
            color: var(--text-color);
            padding: 10px;
            touch-action: manipulation;
        }

        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            width: 100%;
            max-width: 600px; /* Genişletildi */
        }

        h1 { 
            color: var(--text-color); 
            text-shadow: 2px 2px 0px #fa4659, 4px 4px 0px #2eb872;
        }

        .hud {
            display: flex;
            justify-content: space-between;
            width: 100%;
            font-size: 1rem;
        }

        .canvas-wrapper { 
            position: relative; 
            width: 100%; 
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.2);
            border: 2px solid #fff;
            border-radius: 8px;
            overflow: hidden;
        }
        canvas { 
            width: 100%; 
            height: auto; 
            background: linear-gradient(180deg, #0d0221 0%, #1a0a3d 100%);
            display: block; 
        }

        .overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(13, 2, 33, 0.8);
            display: flex; flex-direction: column;
            justify-content: center; align-items: center; text-align: center;
            color: white; z-index: 10;
        }
        .overlay.hidden { display: none; }
        .overlay h2 { font-size: 2rem; margin-bottom: 1.5rem; line-height: 1.2; text-shadow: 3px 3px 0px var(--paddle-color); }
        .overlay button {
            font-family: var(--font-family); font-size: 1rem; padding: 1rem 2rem;
            background-color: #fa4659; color: var(--text-color); border: 2px solid var(--text-color); cursor: pointer;
            box-shadow: 4px 4px 0px var(--text-color); transition: all 0.2s;
            border-radius: 8px;
        }
        .overlay button:hover { 
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0px var(--text-color);
        }

        @media (max-width: 600px) {
            .hud, h1 { font-size: 0.8rem; }
            .overlay h2 { font-size: 1.5rem; }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>BLOK KIRICI</h1>
        <div class="hud">
            <div id="score-display">SKOR: 0</div>
            <div id="lives-display">CAN: 3</div>
        </div>
        
        <div class="canvas-wrapper">
            <canvas id="gameCanvas"></canvas>
            
            <div id="start-screen" class="overlay">
                <h2>BAŞLAMAYA HAZIR MISIN?</h2>
                <button id="start-button">BAŞLA</button>
            </div>
            
            <div id="game-over-screen" class="overlay hidden">
                <h2>OYUN BİTTİ</h2>
                <button id="restart-button">YENİDEN DENE</button>
            </div>
            
             <div id="level-complete-screen" class="overlay hidden">
                <h2>BÖLÜM GEÇİLDİ!</h2>
             </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');
            const scoreDisplay = document.getElementById('score-display');
            const livesDisplay = document.getElementById('lives-display');
            const startScreen = document.getElementById('start-screen');
            const gameOverScreen = document.getElementById('game-over-screen');
            const levelCompleteScreen = document.getElementById('level-complete-screen');
            const startButton = document.getElementById('start-button');
            const restartButton = document.getElementById('restart-button');

            canvas.width = 480;
            canvas.height = 320;

            let score, lives, gameState, rightPressed, leftPressed;
            let animationFrameId;

            // Oyun Nesneleri
            const ball = {
                x: canvas.width / 2,
                y: canvas.height - 30,
                dx: 2,
                dy: -2,
                radius: 10,
                draw() {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                    ctx.fillStyle = "#fcf6b1";
                    ctx.fill();
                    ctx.closePath();
                }
            };

            const paddle = {
                height: 10,
                width: 75,
                x: (canvas.width - 75) / 2,
                speed: 7,
                draw() {
                    ctx.beginPath();
                    ctx.rect(this.x, canvas.height - this.height, this.width, this.height);
                    ctx.fillStyle = "#f5f5f5";
                    ctx.fill();
                    ctx.closePath();
                }
            };
            
            // Tuğla Ayarları
            const brick = {
                rowCount: 3,
                columnCount: 5,
                width: 75,
                height: 20,
                padding: 10,
                offsetTop: 30,
                offsetLeft: 30,
                colors: ['#fa4659', '#2eb872', '#f9a828', '#3498db', '#9b59b6']
            };

            let bricks = [];

            function createBricks() {
                bricks = [];
                 for(let c = 0; c < brick.columnCount; c++) {
                    bricks[c] = [];
                    for(let r = 0; r < brick.rowCount; r++) {
                        bricks[c][r] = { x: 0, y: 0, status: 1 };
                    }
                }
            }

            function init(isNewGame = true) {
                if (isNewGame) {
                    score = 0;
                    lives = 3;
                }
                gameState = 'initializing';
                ball.x = canvas.width / 2;
                ball.y = canvas.height - 30;
                ball.dx = 2;
                ball.dy = -2;
                paddle.x = (canvas.width - paddle.width) / 2;
                createBricks();
                updateHUD();
                gameState = 'playing';
            }

            function updateHUD() {
                scoreDisplay.textContent = `SKOR: ${score}`;
                livesDisplay.textContent = `CAN: ${lives}`;
            }

            // Çizim Fonksiyonları
            function drawBall() {
                ball.draw();
            }

            function drawPaddle() {
                paddle.draw();
            }

            function drawBricks() {
                for(let c = 0; c < brick.columnCount; c++) {
                    for(let r = 0; r < brick.rowCount; r++) {
                        if(bricks[c][r].status === 1) {
                            const brickX = (c * (brick.width + brick.padding)) + brick.offsetLeft;
                            const brickY = (r * (brick.height + brick.padding)) + brick.offsetTop;
                            bricks[c][r].x = brickX;
                            bricks[c][r].y = brickY;
                            ctx.beginPath();
                            ctx.rect(brickX, brickY, brick.width, brick.height);
                            ctx.fillStyle = brick.colors[c % brick.colors.length];
                            ctx.fill();
                            ctx.closePath();
                        }
                    }
                }
            }

            // Çarpışma Tespiti
            function collisionDetection() {
                for(let c=0; c<brick.columnCount; c++) {
                    for(let r=0; r<brick.rowCount; r++) {
                        const b = bricks[c][r];
                        if(b.status === 1) {
                            if(ball.x > b.x && ball.x < b.x+brick.width && ball.y > b.y && ball.y < b.y+brick.height) {
                                ball.dy = -ball.dy;
                                b.status = 0;
                                score++;
                                updateHUD();
                                if(score === brick.rowCount * brick.columnCount) {
                                    levelComplete();
                                }
                            }
                        }
                    }
                }
            }
            
            function update() {
                // Duvar çarpışmaları (sol/sağ)
                if(ball.x + ball.dx > canvas.width - ball.radius || ball.x + ball.dx < ball.radius) {
                    ball.dx = -ball.dx;
                }
                // Duvar çarpışmaları (üst)
                if(ball.y + ball.dy < ball.radius) {
                    ball.dy = -ball.dy;
                } else if(ball.y + ball.dy > canvas.height - ball.radius) {
                    // Platform çarpışması
                    if(ball.x > paddle.x && ball.x < paddle.x + paddle.width) {
                        ball.dy = -ball.dy;
                    } else {
                        loseLife();
                    }
                }

                // Platform Hareketi
                if(rightPressed && paddle.x < canvas.width - paddle.width) {
                    paddle.x += paddle.speed;
                } else if(leftPressed && paddle.x > 0) {
                    paddle.x -= paddle.speed;
                }

                ball.x += ball.dx;
                ball.y += ball.dy;
            }

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                drawBricks();
                drawBall();
                drawPaddle();
                collisionDetection();
            }

            function gameLoop() {
                if(gameState !== 'playing') return;
                
                update();
                draw();
                
                animationFrameId = requestAnimationFrame(gameLoop);
            }
            
            // Kontroller
            document.addEventListener("keydown", e => {
                if(e.key == "Right" || e.key == "ArrowRight") rightPressed = true;
                else if(e.key == "Left" || e.key == "ArrowLeft") leftPressed = true;
            }, false);

            document.addEventListener("keyup", e => {
                if(e.key == "Right" || e.key == "ArrowRight") rightPressed = false;
                else if(e.key == "Left" || e.key == "ArrowLeft") leftPressed = false;
            }, false);
            
            document.addEventListener("mousemove", e => {
                const relativeX = e.clientX - canvas.getBoundingClientRect().left;
                if(relativeX > 0 && relativeX < canvas.width) {
                    paddle.x = relativeX - paddle.width/2;
                }
            }, false);

            function loseLife() {
                lives--;
                updateHUD();
                if(lives <= 0) {
                    gameOver();
                } else {
                    ball.x = canvas.width/2;
                    ball.y = canvas.height-30;
                    ball.dx = 2;
                    ball.dy = -2;
                    paddle.x = (canvas.width-paddle.width)/2;
                }
            }
            
            function gameOver() {
                gameState = 'gameOver';
                gameOverScreen.classList.remove('hidden');
                cancelAnimationFrame(animationFrameId);
            }

            function levelComplete() {
                 gameState = 'paused';
                 levelCompleteScreen.classList.remove('hidden');
                 cancelAnimationFrame(animationFrameId);
                 setTimeout(() => { 
                    levelCompleteScreen.classList.add('hidden');
                    // Geliştirme notu: Sonraki level'lar için buraya kod eklenebilir.
                    // Şimdilik oyunu yeniden başlatıyoruz.
                    init(false); 
                    gameLoop();
                }, 3000);
            }


            function startGame() {
                startScreen.classList.add('hidden');
                gameOverScreen.classList.add('hidden');
                init(true);
                if(animationFrameId) cancelAnimationFrame(animationFrameId);
                gameLoop();
            }
            
            startButton.addEventListener('click', startGame);
            restartButton.addEventListener('click', startGame);
        });
    </script>
</body>
</html>

